# GOST V3 入门系列（二）：安装与最小可运行

> 本篇目标：照着做就能跑
>
> - 安装 `gost`（V3）
> - 启动一个**只监听本机**的代理入口（安全）
> - 用 `curl` 验证“流量确实走了 gost”
>
> 本篇只写“可验证”的步骤。遇到不同 V3 Release 在参数/行为上有差异时，**用 `gost --help` 和官方文档自查**。

---

## 0. 要先做的 2 个决定

### 0.1 是在“本机学习”还是“服务器部署”？

- **本机学习（推荐新手先选这个）**：只让 gost 监听 `127.0.0.1`，只给自己用，安全、简单、排障成本低。
- **服务器部署**：需要考虑防火墙、开放端口、认证/准入、日志留存等（本系列第 6 篇会专门讲）。

本篇默认你先做 **本机学习**。

### 0.2 你用的系统是什么？

我会把步骤分别写给：

- Windows 10/11（你当前环境）
- Linux
- macOS

你只需要跟着自己的系统做即可。

---

## 1. 获取 gost V3：只认官方 Release

### 1.1 官方来源在哪里？

gost V3 的官方仓库是 `go-gost/gost`，建议只从它的 Release 下载二进制：

- 仓库：[`https://github.com/go-gost/gost`](https://github.com/go-gost/gost)
- Releases：[`https://github.com/go-gost/gost/releases`](https://github.com/go-gost/gost/releases)

> 为什么强调 Release？因为网上很多教程会混用旧版本参数；Release 二进制 + `gost -h/--help` 是最稳的组合。

### 1.2 怎么选对“操作系统/架构”的文件？

在 Releases 页面你会看到很多资产（Assets），名字通常会包含：

- **操作系统**：`windows` / `linux` / `darwin`（macOS）
- **架构**：`amd64`（最常见的 64 位 x86）、`arm64`（常见于 ARM 服务器/Apple 芯片）等

如果你不确定自己的架构：

- Windows：任务管理器 → 性能 → CPU（通常是 x64）
- Linux：`uname -m`
- macOS：Apple 芯片通常是 arm64，Intel 是 amd64

> 不同 Release 的压缩格式可能是 `.zip` / `.tar.gz` / `.gz` 等，只要你解压后拿到 `gost`（Linux/macOS）或 `gost.exe`（Windows）即可。

---

## 2. Windows 10/11：从下载到能运行（详细版）

### 2.1 下载并解压

1. 打开 Releases：[`https://github.com/go-gost/gost/releases`](https://github.com/go-gost/gost/releases)
2. 进入你们要使用的 V3 版本（例如 `v3.x.y`）
3. 在 Assets 里下载带有 `windows` 和你架构（通常 `amd64`）的压缩包
4. 解压到一个固定目录（推荐不要放桌面，避免权限/路径问题），例如：
   - `C:\Tools\gost\`

解压后，你应该能看到类似：

- `gost.exe`

> 如果你没看到 gost.exe，最常见有两种原因：
- 下错了系统版本：例如下载了 darwin（macOS）或 linux 的资产，在 Windows 解压出来通常会是一个叫 gost 的文件（不带 .exe），这在 Windows 上不能当作本机可执行文件使用。解决办法：回到 Releases，选择包含 windows（以及 amd64/arm64）字样的资产重新下载。
- 文件名不同：有的 Release 会带版本号或不同命名，但在 Windows 上通常仍然是 .exe（例如 gost-windows-amd64.exe 或解压后得到 gost.exe）。你可以先不改名，后面命令里用实际文件名；改名只是为了方便。


### 2.2 打开 PowerShell 并进入目录

在 C:\Tools\gost\ 空白处右键 → “在终端打开”，
有的默认终端是cmd，故此也可以在路径上方直接输入PowerShell然后回车，
![](.\images\image1.png)

或手动打开 PowerShell 后 `cd` 过去：
```powershell
cd C:\Tools\gost\
```

### 2.3 验证 gost 能跑起来（非常关键）

先确认能打印版本/帮助信息（不同 Release 可能支持不同写法，你只要成功一种即可）：

```powershell
.\gost.exe -V
```

如果 `-V` 不生效，再试：

```powershell
.\gost.exe --version
.\gost.exe -h
.\gost.exe --help
```

你看到版本号或帮助菜单，就说明 **安装成功**（至少二进制可运行）。

### 2.4（推荐）把 gost 加入 PATH：以后就不用写 `.\gost.exe`

最烦的是每次都要 `cd` 目录。把 `C:\Tools\gost\` 加到 PATH 后，你在任何目录都能直接 `gost ...`。

操作步骤：

1. Windows 搜索“环境变量” → 打开“编辑系统环境变量”
2. “环境变量…” → 在“用户变量”或“系统变量”里找到 `Path`
3. 编辑 → 新建 → 填入 `C:\Tools\gost\`
4. 一路确定
5. **重新打开** PowerShell /cmd（旧窗口不会自动刷新 PATH）

验证：

```powershell
gost -V
```

---

## 3. Linux：从下载到能运行（详细版）

> Linux 发行版很多，本节以“通用方式”为主：下载 Release → 解压 → 放到 `/usr/local/bin`。

1. 下载与你系统匹配的 Release 资产（在页面右键复制链接也行）
2. 解压并安装到 PATH

你可以按这个流程做（把文件名替换成你实际下载的那个）：

```bash
cd /tmp
# 假设你下载的是一个压缩包（示例命令，链接请以 Release 页面为准）
# curl -L -o gost.tar.gz <ReleaseAssetURL>

# 解压（根据实际格式选择 tar 或 gunzip）
# tar -xzf gost.tar.gz
# 或：gunzip gost.gz

# 假设解压后得到 gost
chmod +x gost
sudo mv gost /usr/local/bin/gost

# 验证
gost -V || gost --version || gost -h
```

> 如果你没有 `curl`：用包管理器安装即可（如 `apt install curl` / `yum install curl` / `apk add curl`）。

---

## 4. macOS：从下载到能运行（详细版）

思路和 Linux 一样：下载 Release → 解压 → 放入 `/usr/local/bin`（Intel）或 `/opt/homebrew/bin`（Apple 芯片常见 Homebrew 路径）。

你可以先用下面方式确认你希望放到哪个目录（哪个在 PATH 里）：

```bash
echo $PATH
```

通用安装流程：

```bash
cd /tmp
# 下载并解压（命令根据 Release 资产格式调整）
# curl -L -o gost.tar.gz <ReleaseAssetURL>
# tar -xzf gost.tar.gz

chmod +x gost
sudo mv gost /usr/local/bin/gost

gost -V || gost --version || gost -h
```

---

## 5. 最小可运行：启动一个“本机 SOCKS5 代理”

### 5.1 为什么推荐 SOCKS5？

它的优势是：

- 客户端工具（`curl`）很容易测试
- 不依赖浏览器复杂设置
- 出问题时定位更直接

### 5.2 启动命令（本机学习模式）

我们要让它 **只监听本机**，避免不小心暴露到局域网/公网。

先试这条（更安全）：

```bash
gost -L socks5://127.0.0.1:1080
```

如果你的 Release 不接受带 host 的写法，再试（更宽松，但只建议在本机学习时用）：

```bash
gost -L socks5://:1080
```

看到 gost 持续运行、没有立刻退出/报错，就表示监听已启动。

> 停止：在当前窗口按 `Ctrl + C`。

---

## 6. 验证：用 curl 证明“流量经过了 gost”

### 6.1 第一步：确认端口在监听

Windows另外打开一个PowerShell（此时保持5.2打开的powershell一直开启，不要动，后面操作都在新打开的powershell中进行）：

```powershell
netstat -ano | findstr :1080
```

Linux/macOS：

```bash
ss -lntp | grep 1080 || netstat -an | grep 1080
```

你只需要看到类似“LISTEN/监听中”的信息即可。

### 6.2 第二步：用 SOCKS5 访问一个 HTTP 站点

用 `curl` 走 SOCKS5 代理访问 `example.com`（这个域名常用于测试）：

```bash
curl.exe --socks5-hostname 127.0.0.1:1080 http://example.com -v
```

你能拿到响应内容/状态码（例如 `200` 或 `301`），就说明：

- 你的应用（curl）→ gost 入站：通
- gost 出站 → 目标：通
- 中间确实完成了转发

> 小提示：`--socks5-hostname` 会把域名解析交给代理侧处理（如果你暂时不理解也没关系，本系列第 5 篇会讲 DNS 位置问题）。

---

## 7.（可选）再跑一个“本机 HTTP 代理”（方便和浏览器联动）

启动 HTTP 代理（同样建议先绑定 `127.0.0.1`）：

```bash
gost -L http://127.0.0.1:8080
```

用 curl 验证：

```bash
curl.exe -x http://127.0.0.1:8080 http://example.com -v
```

---

## 8.（可选）让它“别关窗口就停”：后台运行与日志落盘


### 8.1 Windows：用 PowerShell 启动后台进程并写日志

在 `gost.exe` 所在目录执行（按需修改参数/端口）：

```powershell
Start-Process -FilePath ".\gost.exe" `
  -ArgumentList "-L socks5://127.0.0.1:1080" `
  -RedirectStandardOutput ".\gost.out.log" `
  -RedirectStandardError ".\gost.err.log" `
  -NoNewWindow
```

停止方式（两种任选其一）：

- 任务管理器里结束 `gost.exe`
- 或用 PowerShell 查 PID 后停止（新手可先不用）

### 8.2 Linux/macOS：nohup + 重定向

```bash
nohup gost -L socks5://127.0.0.1:1080 > gost.log 2>&1 &
```

停止：

```bash
pkill gost
```

---

## 9. 常见问题（新手 90% 会踩到）

### 9.1 提示端口被占用（address already in use）

原因：`1080`/`8080` 已被别的程序用掉了。  
解决：换端口，例如 `1081`：

```bash
gost -L socks5://127.0.0.1:1081
```

### 9.2 Windows 里运行提示“无法运行/被阻止”

可能是：

- 文件来自网络下载，被 Windows 标记为不安全（右键属性里解除阻止）
- 杀软拦截（需要按公司安全策略处理）

### 9.3 curl 找不到命令

- Windows 10/11 一般自带 `curl`；如果没有，用 PowerShell 的 `Invoke-WebRequest` 也能测，但不如 curl 直观（可再补一版验证脚本）
- Linux：安装 `curl`（如 `apt install curl`）

### 9.4 curl 能连到 127.0.0.1:1080，但访问目标失败

这类问题通常不在 Listener，而在“出站/网络环境/目标可达性”。你可以按顺序排：

- 先不用代理直接 `curl http://example.com -v` 看本机是否能访问
- 再用代理访问
- 看 gost 是否打印错误日志

（第 8 篇《排障手册》会把这类问题做成固定流程。）

---

## 10. 本篇小结：完成标准

1. 能从官方 Release 下载到正确平台的 V3 二进制
2. 能在命令行看到 `gost` 的版本或帮助信息
3. 能启动一个只监听本机的代理入口（如 SOCKS5 1080）
4. 能用 `curl` 通过代理成功访问 `http://example.com`